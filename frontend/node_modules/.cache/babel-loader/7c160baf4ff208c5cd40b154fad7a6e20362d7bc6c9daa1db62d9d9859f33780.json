{"ast":null,"code":"var _jsxFileName = \"/Users/guillaumebrousset/Documents/STUDI/billeterie_jo/frontend/src/components/OfferList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport OfferCard from './OfferCard';\nimport './OfferList.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst OfferList = () => {\n  _s();\n  const [offers, setOffers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedOffers, setSelectedOffers] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchOffers = async () => {\n      try {\n        const response = await axios.get('http://localhost:3001/api/offers');\n        setOffers(response.data);\n      } catch (error) {\n        console.error('Erreur lors de la récupération des offres:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchOffers();\n  }, []);\n  const toggleOfferSelection = offer => {\n    if (selectedOffers.includes(offer)) {\n      setSelectedOffers(selectedOffers.filter(o => o.offer_id !== offer.offer_id));\n    } else {\n      setSelectedOffers([...selectedOffers, offer]);\n    }\n  };\n  const handlePaymentClick = () => {\n    navigate('/checkout', {\n      state: {\n        selectedOffers\n      }\n    });\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Chargement...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"offer-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"offers-container\",\n      children: offers.map(offer => /*#__PURE__*/_jsxDEV(OfferCard, {\n        offer: offer,\n        isSelected: selectedOffers.includes(offer),\n        toggleOfferSelection: toggleOfferSelection\n      }, offer.offer_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Panier\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), selectedOffers.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [selectedOffers.map(offer => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [offer.offer_name, \" - \", offer.price, \" \\u20AC\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 33\n          }, this)\n        }, offer.offer_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 29\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handlePaymentClick,\n          className: \"pay-button\",\n          children: \"Payer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Votre panier est vide.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n_s(OfferList, \"7TeaPXN/vUgGfQJSW5XHZw/gwXA=\", false, function () {\n  return [useNavigate];\n});\n_c = OfferList;\nexport default OfferList;\nvar _c;\n$RefreshReg$(_c, \"OfferList\");","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","OfferCard","jsxDEV","_jsxDEV","Fragment","_Fragment","OfferList","_s","offers","setOffers","loading","setLoading","selectedOffers","setSelectedOffers","navigate","fetchOffers","response","get","data","error","console","toggleOfferSelection","offer","includes","filter","o","offer_id","handlePaymentClick","state","children","fileName","_jsxFileName","lineNumber","columnNumber","className","map","isSelected","length","offer_name","price","onClick","_c","$RefreshReg$"],"sources":["/Users/guillaumebrousset/Documents/STUDI/billeterie_jo/frontend/src/components/OfferList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport OfferCard from './OfferCard';\nimport './OfferList.css';\n\nconst OfferList = () => {\n    const [offers, setOffers] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [selectedOffers, setSelectedOffers] = useState([]);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchOffers = async () => {\n            try {\n                const response = await axios.get('http://localhost:3001/api/offers');\n                setOffers(response.data);\n            } catch (error) {\n                console.error('Erreur lors de la récupération des offres:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchOffers();\n    }, []);\n\n    const toggleOfferSelection = (offer) => {\n        if (selectedOffers.includes(offer)) {\n            setSelectedOffers(selectedOffers.filter(o => o.offer_id !== offer.offer_id));\n        } else {\n            setSelectedOffers([...selectedOffers, offer]);\n        }\n    };\n\n    const handlePaymentClick = () => {\n        navigate('/checkout', { state: { selectedOffers } });\n    };\n\n    if (loading) {\n        return <div>Chargement...</div>;\n    }\n\n    return (\n        <div className=\"offer-list\">\n            <div className=\"offers-container\">\n                {offers.map(offer => (\n                    <OfferCard\n                        key={offer.offer_id}\n                        offer={offer}\n                        isSelected={selectedOffers.includes(offer)}\n                        toggleOfferSelection={toggleOfferSelection}\n                    />\n                ))}\n            </div>\n\n            <div className=\"cart-summary\">\n                <h2>Panier</h2>\n                {selectedOffers.length > 0 ? (\n                    <>\n                        {selectedOffers.map(offer => (\n                            <div key={offer.offer_id}>\n                                <p>{offer.offer_name} - {offer.price} €</p>\n                            </div>\n                        ))}\n                        <button onClick={handlePaymentClick} className=\"pay-button\">\n                            Payer\n                        </button>\n                    </>\n                ) : (\n                    <p>Votre panier est vide.</p> \n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default OfferList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}